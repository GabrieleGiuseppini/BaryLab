= Verify elasticity & friction
	! TODO: at impact (during ray tracing), if we are on edge we do not update pos
	X Try fix 1:
		- At impact:
			- Set velocity to classic response (N+T)
			- If bounce is more than threshold:
				- Detach from edge by fixed epsilon
			- Else (bounce < threshold)				
				- Stay on edge
			- Return true
		- Then, at step beginning:
			- If on edge (implies we're constrained):
				- Total forces += (apparent forces)
				- When we'll integrate, we'll zero out gravity and apparent force (depending on normal), and also take eventual bounce velocity
			- Integrate
				- If on edge, we zero out gravity and apparent force (depending on normal) because of counter apparent forces
				- We also take the eventual bounce velocity acquired during impact
		- No more no-do on-edge case at RT
	X Try fix 2:
		- Move impact response to intersection finding, when that edge is floor and we go through it
		- At inital on edge, if we go through it: flatten trajectory
			- Replacing targets (so it's also rendered)
			- Replacing velocity
	= Try fix 3: at impact, after response we flatten trajectory
		- Fix issue when at vertex
		- Cleanup:
			- Code: do not mix local and state variables, given that we change target now
	- Try fix 4:
		- Branch first, reverting code - keeping this TODO!
		- At physics we detect being on an edge/vertex and we do physics trajectory accordingly
			- Flattening forces if on edge, doing TODO if on vertex
		- At RT, we become tolerant of trajectory being almost-parallel to edge, and continue RT when moving along edge
			- What do we do now if we are on edge and trajectory is strictly outside?
				- Should not happen at entry because of physics step; could it happen during RT though?
					- If it happens, we simply terminate - like old 
			- We also need to become tolerant to being on vertex, that's a bug that should have been already there
			- Also, impact (with response) only happens at real impact, i.e. when intersecting edge that is floor (& ghost condition)
				- We first move to edge, and then check floor+ghost and do normal response
				- TODO: what happens to the respone velocity? If we complete here, we'll end up being on edge and by definition we'll flatten, not bounce
					- However, if after response we bounce also trajectory and continue RT, we end up bouncing all the time and never terminating - hitting edge is our termination condition
					  for when target is unreachable
					- A possible way out is to ensure that after the bounce we are _not_ on an edge, e.g. by moving by epsilon OR by explicitly entering a "on edge but not on edge" state before
					  termination
					- Another way is to make sure in the physics step to figure out, when on edge, whether current velocity would make a bounce - and thus no "opposite apparent" - or not
	= Try fix 5 (Moleskine, holidays):
		= Consider alternative implementation:
			- Elasticity (impact) done like now at edge
			- Apparent forces & friction done @ physics steps iff on edge
				- How to avoid doing impact again at RT edge however?
		- FIX:
			- When climbing edge @ vertex, we switch "edge we're on and thus want to ignore"  from climbed to other one, arbitrarily
		- TODO's:
			- Test CalculatePhysicsDeltaEdge's "against floor" check for not against floor
		

				


- Allow for moving mesh
	- TODOHERE
	- Particles::State: TargetPos becomes non-opt member of opt RayTracingState
		- Presence of RayTracingState tells we're doing ray tracing instead of physics, in place of old TargetPos
	- Everything "Trajectory" becomes "RayTracingTrajectory"
	- RayTracingState contains CurrentPosition - not absolute but in mesh coords
		- Initialized - in constrained state - as current pos in triangle (we should be doing that already), and target as absolute target pos (should be doing that already)
			- See code TODO's - do it also at manually-set case
		- Particle's physical position is only set at end of particle update
			- Set to RayTracingState::CurrentPosition
				- Rationale: when we hit end of particle update, RayTracingState::CurrentPosition is either target position (and thus absolute),
				  or - when hitting edge - at new mesh's edge position - THIS IS THE CRITICAL TEST: should match expected target absolute position
		- Render:
			- At each Render call, if we are doing RayTracing, render an additional ("shadow") particle at RayTracingState::CurrentPosition, almost transparent
				- Real particle will move at end, and ghost disappears because of losing RayTracing state
	- Speed UI: TODO
	- Rendering of mesh wrt speed: TODO
